<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Idle Clicker</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(135deg,#4f7cff,#6be6c1);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.card{
  background:white;
  padding:18px;
  border-radius:14px;
  width:95%;
  max-width:380px;
  box-shadow:0 10px 30px rgba(0,0,0,.2);
}
h3{margin:12px 0 6px;}
input,button{
  width:100%;
  padding:10px;
  margin:6px 0;
  font-size:16px;
}
button{
  border:none;
  border-radius:8px;
  background:#4f7cff;
  color:white;
  font-weight:bold;
  cursor:pointer;
}
button:disabled{opacity:.5}
#circle{
  width:140px;
  height:140px;
  background:#4f7cff;
  border-radius:50%;
  margin:10px auto;
  display:flex;
  align-items:center;
  justify-content:center;
  color:white;
  font-size:22px;
  user-select:none;
  cursor:pointer;
}
.section{
  border-top:1px solid #ddd;
  margin-top:10px;
  padding-top:6px;
}
</style>
</head>

<body>

<div class="card" id="auth">
  <h2>Login</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <button onclick="register()">Register</button>
  <p id="authMsg"></p>
</div>

<div class="card" id="game" style="display:none">
  <h2 id="welcome"></h2>
  <div id="circle">CLICK</div>
  <p id="counter"></p>
  <p id="stats"></p>
  <p id="rebirthText"></p>

  <div class="section">
    <h3>Click Upgrades</h3>
    <button id="x2btn" onclick="buyX2()"></button>
  </div>

  <div class="section">
    <h3>Auto Clickers</h3>
    <button id="autobtn" onclick="buyAuto()"></button>
    <button id="speedbtn" onclick="buySpeed()"></button>
  </div>

  <div class="section">
    <h3>Rebirth</h3>
    <button id="rebirthBtn" onclick="rebirth()"></button>
  </div>

  <!-- ADMIN PANEL -->
  <div class="section" id="adminPanel" style="display:none">
    <h3>Admin Controls</h3>
    <button onclick="wipeAllPlayers()">⚠ Wipe ALL Players</button>
    <button onclick="adminReset()">Reset Admin Progress</button>
    <button onclick="adminGiveMoney()">Give Admin 10K Clicks</button>
  </div>

  <button onclick="logout()">Logout</button>
</div>

<script>
/* ===== ADMIN ===== */
const ADMIN_USERNAME="John";
const ADMIN_PASSWORD="developers2012";
let isAdmin=false;

/* ===== STORAGE ===== */
const getAccounts=()=>JSON.parse(localStorage.getItem("accounts")||"{}");
const saveAccounts=a=>localStorage.setItem("accounts",JSON.stringify(a));
let currentUser=null;

/* ===== GAME DATA ===== */
let clicks=0,multiplier=1,x2Cost=25;
let auto=0,autoCost=100;
let autoInterval=1000,speedCost=250;
let rebirths=0,rebirthCost=1000;
let autoLoop;

/* ===== AUTH ===== */
function register(){
  if(username.value===ADMIN_USERNAME){
    authMsg.textContent="Reserved username"; return;
  }
  const a=getAccounts();
  if(a[username.value]) return authMsg.textContent="User exists";
  a[username.value]={password:password.value,data:{}};
  saveAccounts(a);
  authMsg.textContent="Account created";
}

function login(){
  const a=getAccounts();

  if(username.value===ADMIN_USERNAME && password.value===ADMIN_PASSWORD){
    isAdmin=true;
    if(!a[ADMIN_USERNAME]) a[ADMIN_USERNAME]={password:ADMIN_PASSWORD,data:{}};
    saveAccounts(a);
    currentUser=ADMIN_USERNAME;
    loadGame(a[ADMIN_USERNAME].data);
    adminPanel.style.display="block";
    welcome.textContent="Admin: John";
  } else {
    if(!a[username.value]||a[username.value].password!==password.value){
      authMsg.textContent="Wrong login"; return;
    }
    isAdmin=false;
    currentUser=username.value;
    loadGame(a[currentUser].data);
    adminPanel.style.display="none";
    welcome.textContent="Welcome "+currentUser;
  }

  auth.style.display="none";
  game.style.display="block";
}

/* ===== SAVE / LOAD ===== */
function saveGame(){
  const a=getAccounts();
  a[currentUser].data={
    clicks,multiplier,x2Cost,auto,autoCost,
    autoInterval,speedCost,rebirths,rebirthCost
  };
  saveAccounts(a);
}

function loadGame(d){
  clicks=d.clicks||0;
  multiplier=d.multiplier||1;
  x2Cost=d.x2Cost||25;
  auto=d.auto||0;
  autoCost=d.autoCost||100;
  autoInterval=d.autoInterval||1000;
  speedCost=d.speedCost||250;
  rebirths=d.rebirths||0;
  rebirthCost=d.rebirthCost||1000;
  restartAuto();
  updateUI();
}

/* ===== UI ===== */
function updateUI(){
  counter.textContent="Clicks: "+clicks;
  stats.textContent=`Multiplier: ${multiplier}× | Auto: ${auto}`;
  rebirthText.textContent=`Rebirths: ${rebirths} (x${2**rebirths})`;
  x2btn.textContent=`Buy 2× (${x2Cost})`;
  autobtn.textContent=`Auto Clicker (${autoCost})`;
  speedbtn.textContent=`Auto Speed (${speedCost})`;
  rebirthBtn.textContent=`Rebirth (${rebirthCost})`;
  saveGame();
}

/* ===== GAME ===== */
circle.onclick=()=>{
  clicks+=multiplier*(2**rebirths);
  updateUI();
};

function buyX2(){ if(clicks>=x2Cost){ clicks-=x2Cost; multiplier*=2; x2Cost=Math.floor(x2Cost*1.6); updateUI(); }}
function buyAuto(){ if(clicks>=autoCost){ clicks-=autoCost; auto++; autoCost=Math.floor(autoCost*1.5); restartAuto(); updateUI(); }}
function buySpeed(){ if(clicks>=speedCost&&autoInterval>200){ clicks-=speedCost; autoInterval-=100; speedCost=Math.floor(speedCost*1.7); restartAuto(); updateUI(); }}

function restartAuto(){
  clearInterval(autoLoop);
  autoLoop=setInterval(()=>{
    clicks+=auto*multiplier*(2**rebirths);
    updateUI();
  },autoInterval);
}

function rebirth(){
  if(clicks>=rebirthCost){
    rebirths++;
    clicks=0;
    multiplier=1;
    auto=0;
    x2Cost=25;
    autoCost=100;
    autoInterval=1000;
    speedCost=250;
    rebirthCost*=2;
    restartAuto();
    updateUI();
  }
}

/* ===== ADMIN ACTIONS ===== */
function wipeAllPlayers(){
  if(!isAdmin) return;
  if(confirm("Wipe ALL players?")){
    const a=getAccounts();
    for(const u in a){ if(u!==ADMIN_USERNAME) a[u].data={}; }
    saveAccounts(a);
    alert("All players wiped");
  }
}

function adminReset(){
  if(!isAdmin) return;
  if(confirm("Reset ADMIN progress?")){
    clicks=0;
    multiplier=1;
    auto=0;
    rebirths=0;
    rebirthCost=1000;
    updateUI();
  }
}

function adminGiveMoney(){
  if(!isAdmin) return;
  clicks+=10000;
  updateUI();
}

function logout(){ saveGame(); location.reload(); }
</script>

</body>
</html>
